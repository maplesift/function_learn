# PDO `fetch()` 與 `PDO::FETCH_ASSOC` 的差異

在 PHP 的 PDO 中，`fetch()` 方法的作用是從查詢結果中提取一行數據。  
如果不指定 `PDO::FETCH_ASSOC`，則 `fetch()` 方法的行為會依據 PDO 的默認提取模式來決定，而這個默認模式可以通過 `PDO::setAttribute()` 設定。如果未明確設置默認提取模式，PDO 默認使用的是 `PDO::FETCH_BOTH`。

## 常見提取模式及行為差異

### 1. **`PDO::FETCH_ASSOC`**
- 只返回以列名為鍵的關聯數組。
- 範例結果：
  ```php
  [
      'id' => 1,
      'name' => 'Alice'
  ]
  ```

### 2. **`PDO::FETCH_BOTH`**（默認）
- 同時返回關聯數組（列名為鍵）和索引數組（以列索引為鍵）。
- 範例結果：
  ```php
  [
      0 => 1,
      'id' => 1,
      1 => 'Alice',
      'name' => 'Alice'
  ]
  ```

### 3. **`PDO::FETCH_NUM`**
- 只返回索引數組（以列索引為鍵）。
- 範例結果：
  ```php
  [
      0 => 1,
      1 => 'Alice'
  ]
  ```

### 4. **`PDO::FETCH_OBJ`**
- 返回一個對象，每個列值作為對象的屬性。
- 範例結果：
  ```php
  {
      id: 1,
      name: 'Alice'
  }
  ```

## 差異影響
1. 如果不指定 `PDO::FETCH_ASSOC`，默認模式可能導致返回的數據多餘且混亂，因為同時包含關聯鍵與索引鍵。
2. 如果只需要以列名為鍵的關聯數組，未指定 `PDO::FETCH_ASSOC` 會導致更多內存使用，特別是在大數據集的情況下。
3. 索引鍵和關聯鍵可能會帶來潛在的鍵值衝突，增加處理的複雜性。

## 建議
在使用 `fetch()` 時，根據實際需求明確指定提取模式（如 `PDO::FETCH_ASSOC`），這樣可以避免因默認模式變更或行為差異導致的潛在問題。
